{"version":3,"sources":["CustomSelect/assets/CustomSelect.js"],"names":["CustomSelect","constructor","config","console","log","this","itemsToSubmitSelect","document","querySelector","toSubmit","closest","label","container","initDropdownValues","setSelectedItemsDivMsg","setEventListeners","classList","selectedItemsDiv","querySelectorAll","forEach","selectedItem","getDropdownListItems","filterMethod","textContent","trim","item","handleDropdownInput","toLowerCase","startsWith","e","target","value","handleDropdownItemClick","remove","add","selectedItemDivider","includes","hiddenOption","dropdownList","selItm","createElement","innerHTML","handleDeleteSelectedItem","selItmDiv","optionToDelete","deletedItem","placeholder","clickedItem","find","commoditiesSearchField","addEventListener","appendChild","optionItem","matches","selectedItems","length","search"],"mappings":"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","file":"CustomSelect.min.js","sourcesContent":["class CustomSelect {\r\n    constructor(config) {\r\n        if (!config) return console.log('provide config for CustomSelect');\r\n        this.config = config;\r\n\r\n        this.selectedItemsDiv = document.querySelector(`#${config.container} .selected-items`);\r\n        this.itemsToSubmitSelect = document.querySelector(`#${config.toSubmit}`);\r\n        this.form = this.itemsToSubmitSelect.closest('form');\r\n        this.label = document.querySelector(`#${config.container} label[for=${config.toSubmit}]`);\r\n\r\n        this.initDropdownValues();\r\n        this.setEventListeners();\r\n        this.setSelectedItemsDivMsg();\r\n    }\r\n\r\n    initDropdownValues() {\r\n        const selectedItems = this.selectedItemsDiv.querySelectorAll('div');\r\n\r\n        selectedItems.forEach(selectedItem => {\r\n            const dropdownItemsToHide = [...this.getDropdownListItems()]\r\n                .find(item => item.textContent.trim() === selectedItem.textContent.trim());\r\n            dropdownItemsToHide.classList.add('d-none');\r\n        });\r\n    };\r\n\r\n    handleDropdownInput(e) {\r\n        if (this.config.filterMethod === 'startsWith') {\r\n            this.getDropdownListItems().forEach(item => {\r\n                !item.textContent.toLowerCase().trim().startsWith(e.target.value.toLowerCase().trim()) ?\r\n                    item.classList.add('hidden') :\r\n                        item.classList.remove('hidden');\r\n            })\r\n        }else if (this.config.filterMethod === 'includes') {\r\n            this.getDropdownListItems().forEach(item => {\r\n                !item.textContent.toLowerCase().trim().includes(e.target.value.toLowerCase().trim()) ?\r\n                    item.classList.add('hidden') :\r\n                        item.classList.remove('hidden');\r\n            })\r\n        }\r\n    };\r\n\r\n    handleDropdownItemClick(e) {\r\n        if (!e.target.classList.contains('c-list-item')) return;\r\n\r\n        if (this.itemsToSubmitSelect.querySelectorAll('option').length === 5) return;\r\n\r\n        const selectedItemDivider = `\r\n            <span class=\"border-start border-1 border-black\"></span>\r\n            <button class=\"close border-0 rounded-2 m-0 p-0\" type=\"button\" aria-label=\"Close\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"currentColor\" class=\"svg-close bi bi-x\" viewBox=\"0 0 16 16\">\r\n                    <path d=\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708\"/>\r\n                </svg>\r\n            </button>\r\n        `;\r\n\r\n        const hiddenOption = document.querySelector(`#${this.config.toSubmit} option`) ?\r\n            document.querySelector(`#${this.config.toSubmit} option[value=\"${e.target.textContent.trim()}\"]`) :\r\n            null;\r\n\r\n        const selItm = document.createElement('div');\r\n        selItm.classList.add('ps-1', 'rounded-2', 'bg-info');\r\n        selItm.innerHTML = e.target.textContent + selectedItemDivider;\r\n\r\n        if (this.selectedItemsDiv.textContent === this.config.placeholder) this.selectedItemsDiv.textContent = '';\r\n        this.selectedItemsDiv.appendChild(selItm);\r\n\r\n        const clickedItem =\r\n            [...this.getDropdownListItems()].find(item => item.textContent.trim() === e.target.textContent.trim());\r\n        clickedItem && clickedItem.classList.add('d-none');\r\n\r\n        if (!hiddenOption) {\r\n            const optionItem = document.createElement('option');\r\n            optionItem.setAttribute('value', e.target.textContent.trim());\r\n            optionItem.setAttribute('selected', '');\r\n            this.itemsToSubmitSelect.appendChild(optionItem);\r\n        }\r\n    };\r\n\r\n    handleDeleteSelectedItem(e) {\r\n        if (e.target.matches('button > .svg-close') || e.target.matches('button > .svg-close > path')) {\r\n            const selItmDiv = e.target.closest(`#${this.config.container} .c-select .selected-items > div`);\r\n            selItmDiv.remove();\r\n\r\n            const optionToDelete = this.itemsToSubmitSelect.querySelector(\r\n                `option[value=\"${selItmDiv.textContent.trim()}\"]`,\r\n            );\r\n\r\n            const deletedItem = [...this.getDropdownListItems()].find(item => {\r\n                return item.textContent.trim() === selItmDiv.textContent.trim();\r\n            });\r\n\r\n            deletedItem.classList.remove('d-none');\r\n            optionToDelete.remove();\r\n        }\r\n\r\n        this.setSelectedItemsDivMsg();\r\n    };\r\n\r\n    setEventListeners() {\r\n        const commoditiesSearchField = document.querySelector(`#${this.config.search}`);\r\n        const dropdownList = document.querySelector(`#${this.config.container} .c-list`);\r\n\r\n        commoditiesSearchField.addEventListener('input', (e) => this.handleDropdownInput(e));\r\n        this.selectedItemsDiv.addEventListener('click', (e) => this.handleDeleteSelectedItem(e));\r\n        dropdownList.addEventListener('click', (e) => this.handleDropdownItemClick(e));\r\n    };\r\n\r\n    getDropdownListItems() {\r\n        return document.querySelectorAll(`#${this.config.search} + ul > .dropdown-item`);\r\n    };\r\n\r\n    setSelectedItemsDivMsg() {\r\n        const selectedItems = this.selectedItemsDiv.querySelectorAll('div');\r\n\r\n        if (selectedItems.length === 0) {\r\n            this.selectedItemsDiv.textContent = this.config.placeholder;\r\n        }\r\n    };\r\n}\r\n"]}