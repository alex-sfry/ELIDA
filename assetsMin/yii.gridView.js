(a=>{a.fn.yiiGridView=function(e){return o[e]?o[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?(a.error("Method "+e+" does not exist in jQuery.yiiGridView"),!1):o.init.apply(this,arguments)};var c={filterUrl:void 0,filterSelector:void 0,filterOnFocusOut:!0},d={},f={beforeFilter:"beforeFilter",afterFilter:"afterFilter"},l={},o={init:function(r){return this.each(function(){var i=a(this),t=a.extend({},c,r||{}),e=i.attr("id"),n=(void 0===d[e]&&(d[e]={}),d[e]=a.extend(d[e],{settings:t}),!1);s(i,"filter","change.yiiGridView keydown.yiiGridView",t.filterSelector,function(e){if("keydown"===e.type){if(13!==e.keyCode)return;n=!0}else if(n)return void(n=!1);return!t.filterOnFocusOut&&"keydown"!==e.type||o.applyFilter.apply(i),!1})})},applyFilter:function(){var e=a(this),i=d[e.attr("id")].settings,n={},r=(a.each(a(i.filterSelector).serializeArray(),function(){this.name in n||(n[this.name]=[]),n[this.name].push(this.value)}),Object.keys(n)),t=(a.each(yii.getQueryParams(i.filterUrl),function(t,e){-1===r.indexOf(t)&&-1===r.indexOf(t.replace(/\[\d*\]$/,""))&&(a.isArray(e)||(e=[e]),t in n?a.each(e,function(e,i){a.inArray(i,n[t])&&n[t].push(i)}):n[t]=e)}),i.filterUrl.indexOf("?")),c=t<0?i.filterUrl:i.filterUrl.substring(0,t),o=i.filterUrl.indexOf("#"),l=(0<=t&&0<=o&&(c+=i.filterUrl.substring(o)),e.find("form.gridview-filter-form").remove(),a("<form/>",{action:c,method:"get",class:"gridview-filter-form",style:"display:none","data-pjax":""}).appendTo(e)),t=(a.each(n,function(t,e){a.each(e,function(e,i){l.append(a("<input/>").attr({type:"hidden",name:t,value:i}))})}),a.Event(f.beforeFilter));e.trigger(t),!1!==t.result&&(l.submit(),e.trigger(f.afterFilter))},setSelectionColumn:function(e){var i,t,n=a(this),r=a(this).attr("id");void 0===d[r]&&(d[r]={}),d[r].selectionColumn=e.name,e.multiple&&e.checkAll&&(i="input[name='"+e.checkAll+"']",t=(e.class?"input."+e.class:"input[name='"+e.name+"']")+":enabled",s(n,"checkAllRows","click.yiiGridView","#"+r+" "+i,function(){n.find(t+(this.checked?":not(:checked)":":checked")).prop("checked",this.checked).change()}),s(n,"checkRow","click.yiiGridView","#"+r+" "+t,e=function(){var e=n.find(t).length==n.find(t+":checked").length;n.find(i+(e?":not(:checked)":":checked")).prop("checked",e).change()}),n.find(t).length)&&e()},getSelectedRows:function(){var e=a(this),i=d[e.attr("id")],t=[];return i.selectionColumn&&e.find("input[name='"+i.selectionColumn+"']:checked").each(function(){t.push(a(this).parent().closest("tr").data("key"))}),t},destroy:function(){var e=[".yiiGridView",f.beforeFilter,f.afterFilter].join(" "),e=(this.off(e),a(this).attr("id"));return a.each(l[e],function(e,i){a(document).off(i.event,i.selector)}),delete d[e],this},data:function(){var e=a(this).attr("id");return d[e]}};function s(e,i,t,n,r){var c,e=e.attr("id"),o=l[e];void 0!==o&&void 0!==o[i]&&(c=o[i],a(document).off(c.event,c.selector)),void 0===o&&(l[e]={}),a(document).on(t,n,r),l[e][i]={event:t,selector:n}}})(window.jQuery);
//# sourceMappingURL=yii.gridView.js.map
