{"version":3,"file":"yii.captcha.js","sources":["yii.captcha.js"],"sourcesContent":["/**\n * Yii Captcha widget.\n *\n * This is the JavaScript widget used by the yii\\captcha\\Captcha widget.\n *\n * @link https://www.yiiframework.com/\n * @copyright Copyright (c) 2008 Yii Software LLC\n * @license https://www.yiiframework.com/license/\n * @author Qiang Xue <qiang.xue@gmail.com>\n * @since 2.0\n */\n(function ($) {\n    $.fn.yiiCaptcha = function (method) {\n        if (methods[method]) {\n            return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));\n        } else if (typeof method === 'object' || !method) {\n            return methods.init.apply(this, arguments);\n        } else {\n            $.error('Method ' + method + ' does not exist in jQuery.yiiCaptcha');\n            return false;\n        }\n    };\n\n    var defaults = {\n        refreshUrl: undefined,\n        hashKey: undefined\n    };\n\n    var methods = {\n        init: function (options) {\n            return this.each(function () {\n                var $e = $(this);\n                var settings = $.extend({}, defaults, options || {});\n                $e.data('yiiCaptcha', {\n                    settings: settings\n                });\n\n                $e.on('click.yiiCaptcha', function () {\n                    methods.refresh.apply($e);\n                    return false;\n                });\n            });\n        },\n\n        refresh: function () {\n            var $e = this,\n                settings = this.data('yiiCaptcha').settings;\n            $.ajax({\n                url: $e.data('yiiCaptcha').settings.refreshUrl,\n                dataType: 'json',\n                cache: false,\n                success: function (data) {\n                    $e.attr('src', data.url);\n                    $('body').data(settings.hashKey, [data.hash1, data.hash2]);\n                }\n            });\n        },\n\n        destroy: function () {\n            this.off('.yiiCaptcha');\n            this.removeData('yiiCaptcha');\n            return this;\n        },\n\n        data: function () {\n            return this.data('yiiCaptcha');\n        }\n    };\n})(window.jQuery);\n"],"names":["$","fn","yiiCaptcha","method","methods","apply","this","Array","prototype","slice","call","arguments","error","init","defaults","refreshUrl","undefined","hashKey","options","each","$e","settings","extend","data","on","refresh","ajax","url","dataType","cache","success","attr","hash1","hash2","destroy","off","removeData","window","jQuery"],"mappings":"AAWA,CAAA,SAAWA,GACPA,EAAEC,GAAGC,WAAa,SAAUC,GACxB,OAAIC,EAAQD,GACDC,EAAQD,GAAQE,MAAMC,KAAMC,MAAMC,UAAUC,MAAMC,KAAKC,UAAW,CAAC,CAAC,EAClD,UAAlB,OAAOR,GAAwBA,GAGtCH,EAAEY,MAAM,UAAYT,EAAS,sCAAsC,EAC5D,CAAA,GAHAC,EAAQS,KAAKR,MAAMC,KAAMK,SAAS,CAKjD,EAEA,IAAIG,EAAW,CACXC,WAAYC,KAAAA,EACZC,QAASD,KAAAA,CACb,EAEIZ,EAAU,CACVS,KAAM,SAAUK,GACZ,OAAOZ,KAAKa,KAAK,WACb,IAAIC,EAAKpB,EAAEM,IAAI,EACXe,EAAWrB,EAAEsB,OAAO,GAAIR,EAAUI,GAAW,EAAE,EACnDE,EAAGG,KAAK,aAAc,CAClBF,SAAUA,CACd,CAAC,EAEDD,EAAGI,GAAG,mBAAoB,WAEtB,OADApB,EAAQqB,QAAQpB,MAAMe,CAAE,EACjB,CAAA,CACX,CAAC,CACL,CAAC,CACL,EAEAK,QAAS,WACL,IAAIL,EAAKd,KACLe,EAAWf,KAAKiB,KAAK,YAAY,EAAEF,SACvCrB,EAAE0B,KAAK,CACHC,IAAKP,EAAGG,KAAK,YAAY,EAAEF,SAASN,WACpCa,SAAU,OACVC,MAAO,CAAA,EACPC,QAAS,SAAUP,GACfH,EAAGW,KAAK,MAAOR,EAAKI,GAAG,EACvB3B,EAAE,MAAM,EAAEuB,KAAKF,EAASJ,QAAS,CAACM,EAAKS,MAAOT,EAAKU,MAAM,CAC7D,CACJ,CAAC,CACL,EAEAC,QAAS,WAGL,OAFA5B,KAAK6B,IAAI,aAAa,EACtB7B,KAAK8B,WAAW,YAAY,EACrB9B,IACX,EAEAiB,KAAM,WACF,OAAOjB,KAAKiB,KAAK,YAAY,CACjC,CACJ,CACH,EAAEc,OAAOC,MAAM"}