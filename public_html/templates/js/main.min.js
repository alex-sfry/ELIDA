(()=>{"use strict";const t=async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;n&&function(t){""!==t&&$(t).addClass("opacity-25")}(n);try{const n=await fetch(t,{method:e,mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"},body:a});if(n.ok)return await n.json();console.log("fetch error")}catch(t){console.log(t.message)}finally{n&&function(t){$(t).removeClass("opacity-25")}(n)}};const e=(t,e)=>{t.checkValidity()?n(t,e):a(t,e)},a=(t,e)=>{e.classList.add("text-danger","is-invalid"),t.classList.remove("border-dark"),t.classList.add("is-invalid","border-2","border-danger")},n=(t,e)=>{e.classList.remove("text-danger","is-invalid"),t.classList.add("border-dark"),t.classList.remove("is-invalid","border-2","border-danger")};function s(t,e){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.fetchData=e,this.maxPageBtnQty=t,this.paginationHTML=a,this.data=null,this.table=n}function i(t,e){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.cnt=t,this.pagination=n,this.fetchData=e,this.data=null,this.table=a}function o(t){this.cnt=t}s.prototype.getCurrentDataPage=function(){return $("li.active > a").attr("data-page")},s.prototype.renderNewPageBtns=function(t,e,a,n,s,i,o){const c=$("li > .page-link"),l=parseInt(c.eq(2).attr("data-page"))+1,r=parseInt(c.eq(c.length-3).attr("data-page"))+1,d=1===e?"page-link disabled":"page-link",h=e===a?"page-link disabled":"page-link",g=o<=a?o:a;let p='<li class="page-item first"><a class="'.concat(d,'" href="').concat(t.first,'" data-page="0">first</a></li>');p+='<li class="page-item prev-page">\n                <a class="'.concat(d,'" href="').concat(t.prev,'" data-page="').concat(e-1,'">\n                    <span aria-hidden="true">«</span>\n                </a>\n            </li>');for(let s=0;s<g;s++){const i=t.first.substring(0,t.first.length-1);let o;o=e>n?e>=a-1?a-(g-1)+s:r-e<2?e-(g-3)+s:l+s:e<=2?1+s:e-l<2?e-2+s:l+s;p+='<li class="'.concat(o===e?"page-item active":"page-item",'">\n                        <a class="page-link" href="').concat(i).concat(o,'" data-page="').concat(o-1,'">').concat(o,"</a>\n                    </li>")}p+='<li class="page-item next-page">\n                    <a class="'.concat(h,'" href="').concat(t.next,'" data-page="').concat(e-1,'">\n                        <span aria-hidden="true">»</span>\n                    </a>\n                </li>'),p+='<li class="page-item last">\n                    <a class="'.concat(h,'" href="').concat(t.last,'" data-page="').concat(a-1,'">last</a>\n                </li>'),$(".pagination").html(p),$(".page-counter").text("".concat(this.getCurrentDataPage()*i+1," \n       - ").concat(e*i<s?e*i:s," / ").concat(s)),this.setEventListeners()},s.prototype.handleClick=async function(t){if(t.preventDefault(),$(t.currentTarget).parent().is(".active"))return;const e=await this.fetchData($(t.currentTarget).attr("href"));this.data=e,console.log("pagination",e),this.renderNewPageBtns(e.links,e.page+1,e.lastPage,this.getCurrentDataPage(),e.totalCount,e.limit,this.maxPageBtnQty)},s.prototype.resetPagination=function(t,e,a,n){$(".page-counter").text("".concat(0*t+1," - ").concat(1*t," / ").concat(e)),this.renderNewPageBtns(a,1,n,0,e,t,this.maxPageBtnQty),this.setEventListeners()},s.prototype.setEventListeners=function(){$(".page-item > .page-link").on("click",(t=>this.handleClick(t)))},i.prototype.handleClick=async function(t){t.preventDefault();const e=await this.fetchData($(t.currentTarget).attr("href"));this.data=e,this.pagination&&this.pagination.resetPagination.apply(this.pagination,[e.limit,e.totalCount,e.links,e.lastPage]),$("a.sort").removeClass(["asc","desc","sorted"]),4===Object.values(e.attributeOrders)[0]?$(t.currentTarget).addClass(["sorted","asc"]):$(t.currentTarget).addClass(["sorted","desc"]),$(t.currentTarget).attr("href",e.sortUrl)},i.prototype.setEventListeners=function(){$(this.cnt+" .sort").on("click",(t=>this.handleClick(t)))},o.prototype.getRows=function(){return $("#".concat(this.cnt," tbody tr"))},o.prototype.fillTable=function(t,e){function a(e,a){0===e&&$(this).text(t[a].module||t[a].ship),1===e&&$(this).html("<a href='/stations/details/".concat(t[a].station_id,"'>\n                ").concat(t[a].station,"</a>")),2===e&&$(this).text(t[a].type),2===e&&t[a].surface?($(this).addClass("text-success"),$(this).removeClass("text-primary")):2===e&&($(this).addClass("text-primary"),$(this).removeClass("text-success")),3===e&&$(this).text(t[a].pad),4===e&&$(this).text(t[a].system),5===e&&$(this).text(t[a].distance_ly),6===e&&$(this).text(t[a].distance_ls),7===e&&$(this).text("".concat(t[a].price," Cr")),8===e&&$(this).text(t[a].time_diff)}function n(e,a){0===e&&$(this).text(t[a].commodity),1===e&&$(this).html("<a href='/stations/details/".concat(t[a].station_id,"'>\n                ").concat(t[a].station,"</a>")),2===e&&$(this).text(t[a].type),2===e&&t[a].surface?($(this).addClass("text-success"),$(this).removeClass("text-primary")):2===e&&($(this).addClass("text-primary"),$(this).removeClass("text-success")),3===e&&$(this).text(t[a].pad),4===e&&$(this).text(t[a].system),5===e&&$(this).text(t[a].distance_ly),6===e&&$(this).text(t[a].distance_ls),7===e&&$(this).text(t[a].demand?t[a].demand:t[a].stock),8===e&&$(this).text("".concat(t[a].sell_price?t[a].sell_price:t[a].buy_price," Cr")),9===e&&$(this).text(t[a].time_diff)}this.getRows().each((function(s){t[s]?($(this).is(":hidden")&&$(this).show(),$(this).find("td").each((function(t){"commodities"===e&&n.call(this,t,s),"ships-mods"===e&&a.call(this,t,s)}))):$(this).hide()}))};const c=(t,e,a)=>{const n=$("#tr-form"),s=$(".tr-route");a(s);n.on("submit",(a=>(a=>{const i=$("label[for='cargo']").get(0),o=$("#cargo").get(0),c=$("label[for='profit']").get(0),l=$("#profit").get(0);n.get(0).checkValidity()?e(n,s):a.preventDefault(),t(o,i),t(l,c)})(a)))};(()=>{const t=document.querySelector(".cookies-consent-wrapper");t.querySelector("button").addEventListener("click",(()=>{document.cookie="CookieBy=ELIDA; max-age=2592000",document.cookie?t.classList.add("hide"):alert("Cookie can't be set! Please unblock this site from the cookie setting of your browser.")}));-1===document.cookie.indexOf("CookieBy=ELIDA")?t.classList.remove("hide"):t.classList.add("hide")})();const l=()=>{$(".menu__link").each((function(){$(this).attr("href")===window.location.pathname||window.location.pathname.includes($(this).attr("href"))?($(this).addClass("active"),$(this).closest(".menu__item").children(".menu__link").addClass("active")):($(this).removeClass("active"),$(this).closest(".menu__link").removeClass("active"))}))},r=()=>{$(".footer__link").each((function(){$(this).attr("href")===window.location.pathname||window.location.pathname.includes($(this).attr("href"))?$(this).addClass("active"):$(this).removeClass("active")}))},d=(t,e)=>{t.after("<div class='c-loading my-0 mx-auto text-light bg-light-orange rounded-2 px-3 py-1 fw-bold'>Loading . . .</div>"),e.length&&(e.addClass("d-none"),$(".c-pagination-cnt").addClass("d-none"),$(".c-result-legend").addClass("d-none"))},h=t=>{if(t.length){const t=$(".c-loading");t.length&&t.remove()}};document.addEventListener("DOMContentLoaded",(()=>{l(),r(),$("#c-form").length&&((t,e,a)=>{const n=$("#c-form"),c=$(".c-table"),l=$(".pagination");e(c),n.on("submit",(e=>{n.get(0).checkValidity()?t(n,c):e.preventDefault()}));const r=new o("c-table"),d={set:(t,e,a)=>"data"!==e||(r.fillTable(a.data,"commodities"),!0)},h=l.length?new Proxy(new s(7,a,l.html(),r),d):null,g=l.length?new Proxy(new i(".c-table",a,r,h),d):new Proxy(new i(".c-table",a,r),d);h&&h.setEventListeners(),g&&g.setEventListeners()})(d,h,t),$("#mod-form").length&&((t,e,a)=>{const n=$("#mod-form"),c=$(".mod-table"),l=$(".pagination");e(c),n.on("submit",(e=>{n.get(0).checkValidity()?t(n,c):e.preventDefault()}));const r=new o("mod-table"),d={set:(t,e,a)=>"data"!==e||(r.fillTable(a.data,"ships-mods"),!0)},h=l.length?new Proxy(new s(7,a,l.html(),r),d):null,g=l.length?new Proxy(new i(".mod-table",a,r,h),d):new Proxy(new i(".mod-table",a,r),d);h&&h.setEventListeners(),g&&g.setEventListeners()})(d,h,t),$("#ships-form").length&&((t,e,a,n)=>{const c=$("#ships-form"),l=$(".ships-table"),r=$(".pagination"),d=$("label[for='c-hiddenSelect']").get(0),h=$("#c-hiddenSelect").get(0);a(l),c.on("submit",(a=>{c.get(0).checkValidity()?e(c,l):a.preventDefault(),t(h,d)}));const g=new o("ships-table"),p={set:(t,e,a)=>"data"!==e||(g.fillTable(a.data,"ships-mods"),!0)},m=r.length?new Proxy(new s(7,n,r.html(),g),p):null,u=r.length?new Proxy(new i(".ships-table",n,g,m),p):new Proxy(new i(".ships-table",n,g),p);m&&m.setEventListeners(),u&&u.setEventListeners()})(e,d,h,t),$("#tr-form").length&&c(e,d,h),$("#mt-form").length&&(()=>{const t=$("#mt-form");t.on("submit",(e=>{t.get(0).checkValidity()||e.preventDefault()}))})(),$("#accordionForm .accordion-button").on("click",(function(){"Close form"===$(this).text().trim()?$(this).text("Open form"):"Open form"===$(this).text().trim()&&$(this).text("Close form")})),$("[role='tablist']").length&&$(".nav-link").on("click",(function(){$(".nav-link.active").removeClass("active"),$(this).addClass("active"),$(".tab-pane.active").removeClass("active"),$("#".concat($(this).attr("data-bs-toggle"))).addClass("active")}))}))})();
//# sourceMappingURL=main.min.js.map