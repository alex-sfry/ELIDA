(()=>{"use strict";const t=async function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;a&&function(t){""!==t&&$(t).addClass("opacity-25")}(a);try{const a=await fetch(t,{method:"GET",headers:{contentType:"application/json"}});if(a.ok)return await a.json();console.log("fetch error")}catch(t){console.log(t.message)}finally{a&&function(t){$(t).removeClass("opacity-25")}(a)}};const a=(a,e,n,c,s)=>{const o=()=>$("li.active > a").attr("data-page");async function i(a){if(a.preventDefault(),$(this).parent().is(".active"))return;const e=await t($(this).attr("href"));console.log(e),((t,a,e,n,c,i,l)=>{const r=$("li > .page-link"),d=parseInt(r.eq(2).attr("data-page"))+1,g=parseInt(r.eq(r.length-3).attr("data-page"))+1,p=1===a?"page-link disabled":"page-link",h=a===e?"page-link disabled":"page-link";let f='<li class="page-item first"><a class="'.concat(p,'" href="').concat(t.first,'" data-page="0">first</a></li>');f+='<li class="page-item prev-page">\n                    <a class="'.concat(p,'" href="').concat(t.prev,'" data-page="').concat(a-1,'">\n                        <span aria-hidden="true">«</span>\n                    </a>\n                </li>');for(let c=0;c<s;c++){const o=t.first.substring(0,t.first.length-1);let i;i=a>n?a>=e-1?e-(s-1)+c:g-a<2?a-(s-3)+c:d+c:a<=2?1+c:a-d<2?a-2+c:d+c,f+='<li class="'.concat(i===a?"page-item active":"page-item",'">\n                        <a class="page-link" href="').concat(o).concat(i,'" data-page="').concat(i-1,'">').concat(i,"</a>\n                    </li>")}f+='<li class="page-item next-page">\n                    <a class="'.concat(h,'" href="').concat(t.next,'" data-page="').concat(a-1,'">\n                        <span aria-hidden="true">»</span>\n                    </a>\n                </li>'),f+='<li class="page-item last">\n                    <a class="'.concat(h,'" href="').concat(t.last,'" data-page="').concat(e-1,'">last</a>\n                </li>'),$(".pagination").html(f),$(".page-counter").text("".concat(o()*i+1," \n       - ").concat(a*i<c?a*i:c," / ").concat(c)),l()})(e.links,e.page+1,e.lastPage,o(),e.totalCount,e.limit,l)}const l=()=>$(".page-item > .page-link").on("click",i);l()},e=async function(a){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;async function c(a){a.preventDefault();const c=await t($(this).attr("href"));var s,o;console.log(c),e&&(s=c.limit,o=c.totalCount,$(".pagination").html(n),$(".page-counter").text("".concat(0*s+1," - ").concat(1*s," / ").concat(o)),e("first","prev-page","next-page","last",7)),$("a.sort").removeClass(["asc","desc","sorted"]),4===Object.values(c.attributeOrders)[0]?$(this).addClass(["sorted","asc"]):$(this).addClass(["sorted","desc"]),$(this).attr("href",c.sortUrl)}$(a+" .sort").on("click",c)},n=(t,a,e)=>{const n=document.querySelector("#tr-form");n.addEventListener("submit",(a=>(a=>{const e=document.querySelector("label[for='cargo']"),c=document.querySelector("#cargo"),s=document.querySelector("label[for='profit']"),o=document.querySelector("#profit");n.checkValidity()||a.preventDefault(),t(c,e),t(o,s)})(a)))},c=(t,a)=>{t.checkValidity()?o(t,a):s(t,a)},s=(t,a)=>{a.classList.add("text-danger","is-invalid"),t.classList.remove("border-dark"),t.classList.add("is-invalid","border-2","border-danger")},o=(t,a)=>{a.classList.remove("text-danger","is-invalid"),t.classList.add("border-dark"),t.classList.remove("is-invalid","border-2","border-danger")},i=()=>{$(".menu__link").each((function(){$(this).attr("href")===window.location.pathname||window.location.pathname.includes($(this).attr("href"))?$(this).addClass("active"):$(this).removeClass("active")}))},l=(t,a)=>{t.after("<div class='c-loading my-0 mx-auto text-light bg-light-orange rounded-2 p-2 fw-bold'>Loading . . .</div>"),a.length&&(a.addClass("d-none"),$(".c-pagination-cnt").addClass("d-none"),$(".c-result-legend").addClass("d-none"))},r=t=>{if(t.length){const t=$(".c-loading");t.length&&t.remove()}};document.addEventListener("DOMContentLoaded",(()=>{i(),$("#c-form").length&&((t,n)=>{const c=$("#c-form"),s=$(".c-table"),o=$(".pagination");n(s),c.on("submit",(a=>{c[0].checkValidity()?t(c,s):a.preventDefault()})),o.length&&a(0,0,0,0,7),s.length&&e(".c-table",a,o.html())})(l,r),$("#tr-form").length&&n(c)}))})();
//# sourceMappingURL=main.min.js.map