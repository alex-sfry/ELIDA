(()=>{"use strict";function t(t,a){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.fetchData=a,this.maxPageBtnQty=t,this.paginationHTML=e,this.data=null,this.table=n}function a(t,a){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.cnt=t,this.pagination=n,this.fetchData=a,this.data=null,this.table=e}function e(t,a){this.cnt=t,this.columns=a}t.prototype.getCurrentDataPage=function(){return $("li.active > a").attr("data-page")},t.prototype.renderNewPageBtns=function(t,a,e,n,i,s,c){const o=$("li > .page-link"),l=parseInt(o.eq(2).attr("data-page"))+1,r=parseInt(o.eq(o.length-3).attr("data-page"))+1,h=1===a?"page-link disabled":"page-link",p=a===e?"page-link disabled":"page-link",g=c<=e?c:e;let d='<li class="page-item first"><a class="'.concat(h,'" href="').concat(t.first,'" data-page="0">first</a></li>');d+='<li class="page-item prev-page">\n                <a class="'.concat(h,'" href="').concat(t.prev,'" data-page="').concat(a-1,'">\n                    <span aria-hidden="true">«</span>\n                </a>\n            </li>');for(let i=0;i<g;i++){const s=t.first.substring(0,t.first.length-1);let c;c=a>n?a>=e-1?e-(g-1)+i:r-a<2?a-(g-3)+i:l+i:a<=2?1+i:a-l<2?a-2+i:l+i;d+='<li class="'.concat(c===a?"page-item active":"page-item",'">\n                        <a class="page-link" href="').concat(s).concat(c,'" data-page="').concat(c-1,'">').concat(c,"</a>\n                    </li>")}d+='<li class="page-item next-page">\n                    <a class="'.concat(p,'" href="').concat(t.next,'" data-page="').concat(a-1,'">\n                        <span aria-hidden="true">»</span>\n                    </a>\n                </li>'),d+='<li class="page-item last">\n                    <a class="'.concat(p,'" href="').concat(t.last,'" data-page="').concat(e-1,'">last</a>\n                </li>'),$(".pagination").html(d),$(".page-counter").text("".concat(this.getCurrentDataPage()*s+1," \n       - ").concat(a*s<i?a*s:i," / ").concat(i)),this.setEventListeners()},t.prototype.handleClick=async function(t){if(t.preventDefault(),$(t.currentTarget).parent().is(".active"))return;const a=await this.fetchData($(t.currentTarget).attr("href"));this.data=a,this.renderNewPageBtns(a.links,a.page+1,a.lastPage,this.getCurrentDataPage(),a.totalCount,a.limit,this.maxPageBtnQty)},t.prototype.resetPagination=function(t,a,e,n){$(".page-counter").text("".concat(0*t+1," - ").concat(1*t," / ").concat(a)),this.renderNewPageBtns(e,1,n,0,a,t,this.maxPageBtnQty),this.setEventListeners()},t.prototype.setEventListeners=function(){$(".page-item > .page-link").on("click",(t=>this.handleClick(t)))},a.prototype.handleClick=async function(t){t.preventDefault();const a=await this.fetchData($(t.currentTarget).attr("href"));this.data=a,this.pagination&&this.pagination.resetPagination.apply(this.pagination,[a.limit,a.totalCount,a.links,a.lastPage]),$("a.sort").removeClass(["asc","desc","sorted"]),4===Object.values(a.attributeOrders)[0]?$(t.currentTarget).addClass(["sorted","asc"]):$(t.currentTarget).addClass(["sorted","desc"]),$(t.currentTarget).attr("href",a.sortUrl)},a.prototype.setEventListeners=function(){$(this.cnt+" .sort").on("click",(t=>this.handleClick(t)))},e.prototype.getRows=function(){return $("#".concat(this.cnt," tbody tr"))},e.prototype.fillTable=function(t){const a=[];this.columns.forEach((e=>{e in t[0]&&a.push(e)})),this.getRows().each((function(e){t[e]?($(this).is(":hidden")&&$(this).show(),$(this).find("td").each((function(n){const i=t[e][a[n]];"object"==typeof i?"url"in i&&$(this).html('<a href="'.concat(i.url,"\" \n                            class='table-link text-decoration-underline link-underline-primary'>\n                            ").concat(i.text,"</a>")):$(this).text(i)}))):$(this).hide()}))};$(".bs-table");const n=$(".pagination"),i=[];$(".c-table th").each((function(){i.push($(this).attr("data-attr"))}));const s=new e("c-table",i),c={set:(t,a,e)=>"data"!==a||(s.fillTable(e.data),!0)},o=n.length?new Proxy(new t(7,r,n.html(),s),c):null,l=n.length?new Proxy(new a(".c-table",r,s,o),c):new Proxy(new a(".c-table",r,s),c);async function r(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;n&&function(t){""!==t&&$(t).addClass("opacity-25")}(n);try{const n=await fetch(t,{method:a,mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"},body:e});if(n.ok)return await n.json();console.log("fetch error")}catch(t){console.log(t.message)}finally{n&&function(t){$(t).removeClass("opacity-25")}(n)}}o&&o.setEventListeners(),l&&l.setEventListeners()})();
//# sourceMappingURL=BootstrapTable.min.js.map