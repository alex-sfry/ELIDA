{"version":3,"file":"js/main.min.js","mappings":"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","sources":["webpack://webpack-eddn/./src/script/fetchData.js","webpack://webpack-eddn/./src/script/handlePagination.js","webpack://webpack-eddn/./src/script/tableSort.js","webpack://webpack-eddn/./src/script/commodities.js","webpack://webpack-eddn/./src/script/tradeRoutes.js","webpack://webpack-eddn/./src/script/isValidated.js","webpack://webpack-eddn/./src/script/main.js"],"sourcesContent":["export const fetchData = async (url) => {\r\n    try {\r\n        const res = await fetch(\r\n            url, {\r\n                method: 'GET',\r\n                headers: {\r\n                    contentType: 'application/json',\r\n                },\r\n            });\r\n        if (res.ok) {\r\n            return await res.json();\r\n        }\r\n    }\r\n    catch (error) {\r\n        console.log(error.message);\r\n    }\r\n};","import {fetchData} from './fetchData.js';\r\n\r\nexport const handlePagination = (first, prev, next, last, pageBtnQty) => {\r\n    const pagination = document.querySelectorAll('.pagination');\r\n    const getCurrentDataPage = () => document.querySelector('li.active > a').getAttribute('data-page');\r\n\r\n    const renderData = (data) => {\r\n\r\n    };\r\n\r\n    const renderNewPageBtns = (links, next, last, current, totalCount, limit, setEventListeners) => {\r\n        const pageCounter = document.querySelectorAll('.page-counter');\r\n        const pageNumBtns = Array.from(document.querySelectorAll(`li > .page-link`));\r\n        const pageBtnFirstNum = parseInt(pageNumBtns[2].getAttribute('data-page')) + 1;\r\n        const pageBtnLastNum = parseInt(pageNumBtns[pageNumBtns.length - 3 ].getAttribute('data-page')) + 1;\r\n        const clsBegin = next === 1 ? 'page-link disabled' : 'page-link';\r\n        const clsEnd = next === last ? 'page-link disabled' : 'page-link';\r\n\r\n        let html =\r\n            `<li class=\"page-item first\"><a class=\"${clsBegin}\" href=\"${links.first}\" data-page=\"0\">first</a></li>`;\r\n        html +=\r\n            `<li class=\"page-item prev-page\">\r\n                    <a class=\"${clsBegin}\" href=\"${links.prev}\" data-page=\"${next - 1}\">\r\n                        <span aria-hidden=\"true\">«</span>\r\n                    </a>\r\n                </li>`;\r\n\r\n        for (let i = 0 ; i < pageBtnQty; i++) {\r\n            const href = links.first.substring(0, links.first.length - 1);\r\n            let pageNum;\r\n\r\n            if (next > current) {\r\n                if (next >= last - 1) {\r\n                    pageNum = last - (pageBtnQty - 1) + i;\r\n                } else pageNum = pageBtnLastNum - next < 2 ? (next - (pageBtnQty - 3)) + i : pageBtnFirstNum + i;\r\n            } else {\r\n                if (next <= 2) {\r\n                    pageNum = 1 + i;\r\n                } else pageNum = next - pageBtnFirstNum < 2 ? (next - 2) + i : pageBtnFirstNum + i;\r\n            }\r\n\r\n            const cls = pageNum === next ? 'page-item active' : 'page-item';\r\n            html +=\r\n                `<li class=\"${cls}\">\r\n                        <a class=\"page-link\" href=\"${href}${pageNum}\" data-page=\"${pageNum - 1}\">${pageNum}</a>\r\n                    </li>`;\r\n        }\r\n        html +=\r\n            `<li class=\"page-item next-page\">\r\n                    <a class=\"${clsEnd}\" href=\"${links.next}\" data-page=\"${next - 1}\">\r\n                        <span aria-hidden=\"true\">»</span>\r\n                    </a>\r\n                </li>`;\r\n        html +=\r\n            `<li class=\"page-item last\">\r\n                    <a class=\"${clsEnd}\" href=\"${links.last}\" data-page=\"${last - 1}\">last</a>\r\n                </li>`;\r\n\r\n        pagination.forEach(item => item.innerHTML = html);\r\n        pageCounter.forEach(item => item.textContent =\r\n            `${getCurrentDataPage() * limit + 1} - ${next * limit < totalCount ? next * limit : \r\n                totalCount} / ${totalCount}`);\r\n\r\n        setEventListeners();\r\n    };\r\n\r\n    const handleClick = async (e) => {\r\n        e.preventDefault();\r\n        if (e.currentTarget.parentElement.classList.contains('active')) return;\r\n        const res = await fetchData(e.currentTarget.getAttribute('href'));\r\n        console.log(res);\r\n        renderNewPageBtns(\r\n            res.links,\r\n            res.page + 1, // zero based next page received from backend + 1\r\n            res.lastPage,\r\n            getCurrentDataPage(), // zero based current page\r\n            res.totalCount,\r\n            res.limit, // qty per page\r\n            setEventListeners\r\n        );\r\n\r\n        renderData(res);\r\n    };\r\n\r\n    const setEventListeners = () => {\r\n        document.querySelectorAll(`.page-item > .page-link`)\r\n                .forEach(item => item.addEventListener('click', handleClick));\r\n    };\r\n\r\n    setEventListeners();\r\n};\r\n","import {fetchData} from './fetchData.js';\r\n// import {handlePagination} from './handlePagination.js';\r\n\r\nexport const tableSort = async (cnt, handlePagination, paginationHTML = null) => {\r\n    const sortableColumns = document.querySelectorAll('a.sort');\r\n\r\n    const resetPagination = (limit, totalCount) => {\r\n        document.querySelectorAll('.pagination').forEach(item => item.innerHTML = paginationHTML);\r\n        document.querySelectorAll('.page-counter').forEach(item => {\r\n            item.textContent = `${0 * limit + 1} - ${1 * limit} / ${totalCount}`;\r\n        });\r\n\r\n        handlePagination('first', 'prev-page', 'next-page', 'last', 7);\r\n    };\r\n    const renderData = (data) => {\r\n\r\n    };\r\n\r\n    const handleClick = async (e) => {\r\n        e.preventDefault();\r\n        const sortLinkElem = e.currentTarget;\r\n        const data = await fetchData(`${sortLinkElem.getAttribute('href')}`);\r\n        console.log(data);\r\n        paginationHTML && resetPagination(data.limit, data.totalCount);\r\n        sortableColumns.forEach(item => item.classList.remove('asc', 'desc', 'sorted'));\r\n\r\n        if (Object.values(data.attributeOrders)[0] === 4) {\r\n            sortLinkElem.classList.add('sorted', 'asc');\r\n        } else sortLinkElem.classList.add('sorted', 'desc');\r\n\r\n        sortLinkElem.setAttribute('href', data.sortUrl);\r\n        renderData(data);\r\n    };\r\n\r\n    const setEventListeners = () => {\r\n        document.querySelectorAll(`${cnt} .sort`).forEach(item => item.addEventListener('click', handleClick));\r\n    };\r\n\r\n    setEventListeners();\r\n};\r\n","import {handlePagination} from './handlePagination.js';\r\nimport {tableSort} from './tableSort.js';\r\n\r\nexport const commoditiesForm = (loader, removeLoader) => {\r\n    const form = document.querySelector('#c-form');\r\n    const table = document.querySelector('.c-table');\r\n    const pagination = document.querySelector('.pagination');\r\n    removeLoader(table);\r\n\r\n    const handleSubmit = (e) => {\r\n        const form = document.querySelector('#c-form');\r\n\r\n        if (!form.checkValidity()) {\r\n            e.preventDefault();\r\n        } else loader(form, table);\r\n    };\r\n\r\n    form.addEventListener('submit', (e) => handleSubmit(e));\r\n    if (pagination) handlePagination('first', 'prev-page', 'next-page', 'last', 7);\r\n    if (table) tableSort('.c-table', handlePagination, pagination.innerHTML);\r\n};\r\n","export const tradeRouteForm = (isValidated, loader, removeLoader) => {\r\n    const form = document.querySelector('#tr-form');\r\n    const handleSubmit = (e) => {\r\n        const cargoSpaceLabel = document.querySelector('label[for=\\'cargo\\']');\r\n        const cargoSpace = document.querySelector('#cargo');\r\n        const profitLabel = document.querySelector('label[for=\\'profit\\']');\r\n        const profit = document.querySelector('#profit');\r\n\r\n        if (!form.checkValidity()) {\r\n            e.preventDefault();\r\n        }\r\n\r\n        isValidated(cargoSpace, cargoSpaceLabel);\r\n        isValidated(profit, profitLabel);\r\n    };\r\n\r\n    form.addEventListener('submit', (e) => handleSubmit(e));\r\n\r\n    // const observer = new MutationObserver(handleSelectedSysChange);\r\n    // observer.observe(selectedSys, {childList: true});\r\n};","export const isValidated = (elem, elemLabel) => {\r\n    if (!elem.checkValidity()) {\r\n        setInvalid(elem, elemLabel);\r\n    } else {\r\n        setValid(elem, elemLabel);\r\n    }\r\n};\r\n\r\nconst setInvalid = (elem, elemLabel) => {\r\n    elemLabel.classList.add('text-danger', 'is-invalid');\r\n    elem.classList.remove('border-dark');\r\n    elem.classList.add('is-invalid', 'border-2', 'border-danger');\r\n};\r\n\r\nconst setValid = (elem, elemLabel) => {\r\n    elemLabel.classList.remove('text-danger', 'is-invalid');\r\n    elem.classList.add('border-dark');\r\n    elem.classList.remove('is-invalid', 'border-2', 'border-danger');\r\n};\r\n\r\n","import '../styles/scss/style.scss';\r\n// import '../styles/bootstrapSCSS/bootstrap.scss';\r\nimport {commoditiesForm} from './commodities.js';\r\nimport {tradeRouteForm} from './tradeRoutes.js';\r\nimport {isValidated} from './isValidated.js';\r\n\r\nconst initHeader = () => {\r\n    document.querySelectorAll('.menu__link').forEach(item => {\r\n        if (item.getAttribute('href') === window.location.pathname ||\r\n            window.location.pathname.includes(item.getAttribute('href'))) {\r\n            item.classList.add('active');\r\n        } else item.classList.remove('active');\r\n    });\r\n};\r\n\r\nconst loader = (insertElem, hideElem) => {\r\n    insertElem.insertAdjacentHTML(\r\n        'afterend',\r\n        \"<div class='c-loading my-0 mx-auto text-light bg-light-orange rounded-2 p-2 fw-bold'>Loading . . .</div>\"\r\n    );\r\n\r\n    if (hideElem) {\r\n        hideElem.classList.add('d-none');\r\n        document.querySelectorAll('.Zebra_Pagination').forEach( item => {\r\n            item.classList.add('d-none');\r\n        });\r\n    }\r\n};\r\n\r\nconst removeLoader = (elem) => {\r\n    if (elem) {\r\n        const loadingPlaceholder = document.querySelector('.c-loading');\r\n        loadingPlaceholder && loadingPlaceholder.remove();\r\n    }\r\n};\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    initHeader();\r\n    if (document.querySelector('#c-form'))  commoditiesForm(loader, removeLoader);\r\n    if (document.querySelector('#tr-form'))  tradeRouteForm(isValidated, loader, removeLoader);\r\n});\r\n\r\n\r\n"],"names":["fetchData","async","res","fetch","url","method","headers","contentType","ok","json","error","console","log","message","handlePagination","first","prev","next","last","pageBtnQty","pagination","document","querySelectorAll","getCurrentDataPage","querySelector","getAttribute","handleClick","e","preventDefault","currentTarget","parentElement","classList","contains","renderNewPageBtns","links","current","totalCount","limit","setEventListeners","pageCounter","pageNumBtns","Array","from","pageBtnFirstNum","parseInt","pageBtnLastNum","length","clsBegin","clsEnd","html","concat","i","href","substring","pageNum","forEach","item","innerHTML","textContent","page","lastPage","addEventListener","tableSort","cnt","paginationHTML","arguments","undefined","sortableColumns","sortLinkElem","data","resetPagination","remove","Object","values","attributeOrders","add","setAttribute","sortUrl","commoditiesForm","loader","removeLoader","form","table","checkValidity","handleSubmit","tradeRouteForm","isValidated","cargoSpaceLabel","cargoSpace","profitLabel","profit","elem","elemLabel","setValid","setInvalid","insertElem","hideElem","insertAdjacentHTML","loadingPlaceholder","window","location","pathname","includes"],"sourceRoot":""}