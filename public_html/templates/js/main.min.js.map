{"version":3,"file":"js/main.min.js","mappings":"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","sources":["webpack://webpack-eddn/./src/script/fetchData.js","webpack://webpack-eddn/./src/script/handlePagination.js","webpack://webpack-eddn/./src/script/tableSort.js","webpack://webpack-eddn/./src/script/tradeRoutes.js","webpack://webpack-eddn/./src/script/isValidated.js","webpack://webpack-eddn/./src/script/main.js","webpack://webpack-eddn/./src/script/commodities.js"],"sourcesContent":["export const fetchData = async (url, loaderCnt = null) => {\r\n    loaderCnt && enableLoader(loaderCnt);\r\n    try {\r\n        const res = await fetch(\r\n            url, {\r\n                method: 'GET',\r\n                headers: {\r\n                    contentType: 'application/json',\r\n                },\r\n            });\r\n        if (res.ok) {\r\n            return await res.json();\r\n        } else {\r\n            console.log('fetch error');\r\n        }\r\n    }\r\n    catch (error) {\r\n        console.log(error.message);\r\n    }\r\n    finally {\r\n        loaderCnt && disableLoader(loaderCnt);\r\n    }\r\n};\r\n\r\nfunction enableLoader(loaderCnt) {\r\n    if (loaderCnt !== '') {\r\n        $(loaderCnt).addClass('opacity-25');\r\n    }\r\n}\r\n\r\nfunction disableLoader(loaderCnt) {\r\n    $(loaderCnt).removeClass('opacity-25');\r\n}","import {fetchData} from './fetchData.js';\r\n\r\nexport const handlePagination = (first, prev, next, last, pageBtnQty) => {\r\n    const getCurrentDataPage = () => $('li.active > a').attr('data-page');\r\n\r\n    const renderData = (data) => {\r\n\r\n    };\r\n\r\n    const renderNewPageBtns = (links, next, last, current, totalCount, limit, setEventListeners) => {\r\n        const $pageNumBtns = $('li > .page-link');\r\n        const pageBtnFirstNum = parseInt($pageNumBtns.eq(2).attr('data-page')) + 1;\r\n        const pageBtnLastNum = parseInt($pageNumBtns.eq($pageNumBtns.length - 3).attr('data-page')) + 1;\r\n        const clsBegin = next === 1 ? 'page-link disabled' : 'page-link';\r\n        const clsEnd = next === last ? 'page-link disabled' : 'page-link';\r\n\r\n        let html =\r\n            `<li class=\"page-item first\"><a class=\"${clsBegin}\" href=\"${links.first}\" data-page=\"0\">first</a></li>`;\r\n        html +=\r\n            `<li class=\"page-item prev-page\">\r\n                    <a class=\"${clsBegin}\" href=\"${links.prev}\" data-page=\"${next - 1}\">\r\n                        <span aria-hidden=\"true\">«</span>\r\n                    </a>\r\n                </li>`;\r\n\r\n        for (let i = 0; i < pageBtnQty; i++) {\r\n            const href = links.first.substring(0, links.first.length - 1);\r\n            let pageNum;\r\n\r\n            if (next > current) {\r\n                if (next >= last - 1) {\r\n                    pageNum = last - (pageBtnQty - 1) + i;\r\n                } else pageNum = pageBtnLastNum - next < 2 ? (next - (pageBtnQty - 3)) + i : pageBtnFirstNum + i;\r\n            } else {\r\n                if (next <= 2) {\r\n                    pageNum = 1 + i;\r\n                } else pageNum = next - pageBtnFirstNum < 2 ? (next - 2) + i : pageBtnFirstNum + i;\r\n            }\r\n\r\n            const cls = pageNum === next ? 'page-item active' : 'page-item';\r\n            html +=\r\n                `<li class=\"${cls}\">\r\n                        <a class=\"page-link\" href=\"${href}${pageNum}\" data-page=\"${pageNum - 1}\">${pageNum}</a>\r\n                    </li>`;\r\n        }\r\n        html +=\r\n            `<li class=\"page-item next-page\">\r\n                    <a class=\"${clsEnd}\" href=\"${links.next}\" data-page=\"${next - 1}\">\r\n                        <span aria-hidden=\"true\">»</span>\r\n                    </a>\r\n                </li>`;\r\n        html +=\r\n            `<li class=\"page-item last\">\r\n                    <a class=\"${clsEnd}\" href=\"${links.last}\" data-page=\"${last - 1}\">last</a>\r\n                </li>`;\r\n\r\n        $('.pagination').html(html);\r\n        $('.page-counter').text(`${getCurrentDataPage() * limit + 1} \r\n       - ${next * limit < totalCount ? next * limit : totalCount} / ${totalCount}`);\r\n\r\n        setEventListeners();\r\n    };\r\n\r\n    async function handleClick(e) {\r\n        e.preventDefault();\r\n        if ($(this).parent().is('.active')) return;\r\n        const res = await fetchData($(this).attr('href'));\r\n        console.log(res);\r\n        renderNewPageBtns(\r\n            res.links,\r\n            res.page + 1, // zero based next page received from backend + 1\r\n            res.lastPage,\r\n            getCurrentDataPage(), // zero based current page\r\n            res.totalCount,\r\n            res.limit, // qty per page\r\n            setEventListeners,\r\n        );\r\n\r\n        renderData(res);\r\n    }\r\n\r\n    const setEventListeners = () => $('.page-item > .page-link').on('click', handleClick);\r\n    setEventListeners();\r\n};\r\n","import {fetchData} from './fetchData.js';\r\n\r\nexport const tableSort = async (cnt, handlePagination = null, paginationHTML = null) => {\r\n    const resetPagination = (limit, totalCount) => {\r\n        $('.pagination').html(paginationHTML);\r\n        $('.page-counter').text(`${0 * limit + 1} - ${1 * limit} / ${totalCount}`);\r\n        handlePagination('first', 'prev-page', 'next-page', 'last', 7);\r\n    };\r\n    const renderData = (data) => {\r\n\r\n    };\r\n\r\n    async function handleClick(e) {\r\n        e.preventDefault();\r\n        const data = await fetchData($(this).attr('href'));\r\n        console.log(data);\r\n        handlePagination && resetPagination(data.limit, data.totalCount);\r\n        $('a.sort').removeClass(['asc', 'desc', 'sorted']);\r\n\r\n        if (Object.values(data.attributeOrders)[0] === 4) {\r\n            $(this).addClass(['sorted', 'asc']);\r\n        } else $(this).addClass(['sorted', 'desc']);\r\n\r\n        $(this).attr('href', data.sortUrl);\r\n        renderData(data);\r\n    }\r\n\r\n    const setEventListeners = () => $(cnt + ' .sort').on('click', handleClick);\r\n    setEventListeners();\r\n};\r\n","export const tradeRouteForm = (isValidated, loader, removeLoader) => {\r\n    const form = document.querySelector('#tr-form');\r\n    const handleSubmit = (e) => {\r\n        const cargoSpaceLabel = document.querySelector('label[for=\\'cargo\\']');\r\n        const cargoSpace = document.querySelector('#cargo');\r\n        const profitLabel = document.querySelector('label[for=\\'profit\\']');\r\n        const profit = document.querySelector('#profit');\r\n\r\n        if (!form.checkValidity()) {\r\n            e.preventDefault();\r\n        }\r\n\r\n        isValidated(cargoSpace, cargoSpaceLabel);\r\n        isValidated(profit, profitLabel);\r\n    };\r\n\r\n    form.addEventListener('submit', (e) => handleSubmit(e));\r\n\r\n    // const observer = new MutationObserver(handleSelectedSysChange);\r\n    // observer.observe(selectedSys, {childList: true});\r\n};","export const isValidated = (elem, elemLabel) => {\r\n    if (!elem.checkValidity()) {\r\n        setInvalid(elem, elemLabel);\r\n    } else {\r\n        setValid(elem, elemLabel);\r\n    }\r\n};\r\n\r\nconst setInvalid = (elem, elemLabel) => {\r\n    elemLabel.classList.add('text-danger', 'is-invalid');\r\n    elem.classList.remove('border-dark');\r\n    elem.classList.add('is-invalid', 'border-2', 'border-danger');\r\n};\r\n\r\nconst setValid = (elem, elemLabel) => {\r\n    elemLabel.classList.remove('text-danger', 'is-invalid');\r\n    elem.classList.add('border-dark');\r\n    elem.classList.remove('is-invalid', 'border-2', 'border-danger');\r\n};\r\n\r\n","import '../styles/scss/style.scss';\r\n// import '../styles/bootstrapSCSS/bootstrap.scss';\r\nimport {commoditiesForm} from './commodities.js';\r\nimport {tradeRouteForm} from './tradeRoutes.js';\r\nimport {isValidated} from './isValidated.js';\r\n\r\nconst initHeader = () => {\r\n    $('.menu__link').each(function() {\r\n        if ($(this).attr('href') === window.location.pathname ||\r\n            window.location.pathname.includes($(this).attr('href'))) {\r\n            $(this).addClass('active');\r\n        } else $(this).removeClass('active');\r\n    });\r\n};\r\n\r\nconst loader = ($insertElem, $hideElem) => {\r\n    $insertElem.after(\"<div class='c-loading my-0 mx-auto text-light bg-light-orange rounded-2 p-2 fw-bold'>\" +\r\n        \"Loading . . .</div>\");\r\n\r\n    if ($hideElem.length) {\r\n        $hideElem.addClass('d-none');\r\n        $('.c-pagination-cnt').addClass('d-none');\r\n        $('.c-result-legend').addClass('d-none');\r\n    }\r\n};\r\n\r\nconst removeLoader = ($elem) => {\r\n    if ($elem.length) {\r\n        const $loadingPlaceholder = $('.c-loading');\r\n        $loadingPlaceholder.length && $loadingPlaceholder.remove();\r\n    }\r\n};\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    initHeader();\r\n    if ($('#c-form').length)  commoditiesForm(loader, removeLoader);\r\n    if ($('#tr-form').length)  tradeRouteForm(isValidated, loader, removeLoader);\r\n});\r\n\r\n\r\n","import {handlePagination} from './handlePagination.js';\r\nimport {tableSort} from './tableSort.js';\r\n\r\nexport const commoditiesForm = (loader, removeLoader) => {\r\n    const $form = $('#c-form');\r\n    const $table = $('.c-table');\r\n    const $pagination = $('.pagination');\r\n    removeLoader($table);\r\n\r\n    const handleSubmit = (e) => {\r\n        if (!$form[0].checkValidity()) {\r\n            e.preventDefault();\r\n        } else loader($form, $table);\r\n    };\r\n\r\n    $form.on('submit', handleSubmit);\r\n    if ($pagination.length) handlePagination('first', 'prev-page', 'next-page', 'last', 7);\r\n    if ($table.length) tableSort('.c-table', handlePagination, $pagination.html());\r\n};\r\n"],"names":["fetchData","async","url","loaderCnt","arguments","length","undefined","$","addClass","enableLoader","res","fetch","method","headers","contentType","ok","json","console","log","error","message","removeClass","disableLoader","handlePagination","first","prev","next","last","pageBtnQty","getCurrentDataPage","attr","handleClick","e","preventDefault","this","parent","is","renderNewPageBtns","links","current","totalCount","limit","setEventListeners","$pageNumBtns","pageBtnFirstNum","parseInt","eq","pageBtnLastNum","clsBegin","clsEnd","html","concat","i","href","substring","pageNum","text","page","lastPage","on","tableSort","cnt","paginationHTML","data","resetPagination","Object","values","attributeOrders","sortUrl","tradeRouteForm","isValidated","loader","removeLoader","form","document","querySelector","addEventListener","cargoSpaceLabel","cargoSpace","profitLabel","profit","checkValidity","handleSubmit","elem","elemLabel","setValid","setInvalid","classList","add","remove","initHeader","each","window","location","pathname","includes","$insertElem","$hideElem","after","$elem","$loadingPlaceholder","commoditiesForm","$form","$table","$pagination"],"sourceRoot":""}